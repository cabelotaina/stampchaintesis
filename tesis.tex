% online - https://pt.sharelatex.com/project/54c8c145ce57ee9e636bf385

% base do documento https://projetos.inf.ufsc.br/arquivos/Padrao_de_Proposta.pdf
% apoio latex https://github.com/luanadfreitas/latex
\documentclass[12pt,openright,twoside,a4paper,english, brazil]{abntex2} % com draft as imagens desaparecem
\usepackage[utf8]{inputenc}
\usepackage[brazil]{babel}
\usepackage{indentfirst}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{pdfpages}
\usepackage{tabularx}
\usepackage[alf]{abntex2cite} % Citações padrão ABNT
%\usepackage{lscape} % pacote para colocar página em paisagem
\usepackage{color, colortbl} % colorir tabela
\usepackage{multirow} % várias colunas
\usepackage{verbatim} % usado pelo begin/end{comment}
\usepackage{tikz-uml}
\usepackage{usecases}

%Siglas precisa desses pacotes
\usepackage{datagidx}
\newgidx{glossary}{Lista de Abreviaturas e Siglas}
\DTLgidxSetDefaultDB{glossary}

% Siglas
\newterm[description={Trabalho de Conclusão de Curso}]{TCC}
%\newterm[description={GNU's not Unix}]{GNU}
%\newterm[description={GNU public license (Licença pública GNU)}]{GPL}
%\newterm[description={Model, View and Control (Modelo, Visão e Controle)}]{MVC}
%\newterm[description={C reate, R ead, U pdate e D elete}]{CRUD}
\newterm[description={JavaScript}]{JS}
\newterm[description={Universidade Federal de Santa Catarina}]{UFSC}
\newterm[description={global positioning system}]{GPS}


\makeindex



% folha de rosto
\title{Registro Eletrônico de Ponto Seguro baseado em Blockchain}
\author{Maurilio Atila Carvalho de Santana}
\orientador{Ricardo Felipe Custódio}
\instituicao{Universidade Federal de Santa Catarina}
\local{Florianópolis}
\data{Fevereiro de 2018}

\begin{document}
\maketitle

%\begin{folhadeaprovacao}
%Trabalho sob o título \textit{Registro Eletrônico de Ponto Seguro baseado em Blockchain}, defendido por Maurilio Atila Carvalho de Santana e aprovado para obtenção do grau de Bacharel em Ciências da Computação em 28 de Junho de 2018, em Florianópolis,
%Estado de Santa Catarina, pela banca examinadora constituída pelos
%membros:

%\setlength{\ABNTsignthickness}{0.4pt}
%\setlength{\ABNTsignwidth}{10cm}
%\setlength{\ABNTsignskip}{3.5cm}

%\assinatura{Ricardo Felipe Custódio \\ Orientador}
%\assinatura{Daniel Neis Araujo}
%\assinatura{...}
%\end{folhadeaprovacao}

%\capa

\folhaderosto
\includepdf[pages={1}]{figuras/folha_de_aprovacao_proposta_tcc.pdf}	

\begin{resumo}

Este trabalho de conclusão de curso propõe uma aplicação mobile para o Registro Eletrônico de Ponto Seguro baseado em Blockchain e em tecnologias como GPS e o QR-CODE. O objetivo da ferramenta é permitir uma maior segurança tanto por parte do empregador quanto por parte do trabalhador, dado que mesmo com a portaria 1.510/2009 do MTE, que especifica o funcionamento dos relogios de ponto, ainda existem muitas fraudes e desconfiança quando a segurança, tanto por parte dos empregados, quanto por parte dos empregadores. Esperamos que este trabalho ofereça uma contribuição pontual para a discução do uso de blockchain pelo poder publico.

\textbf{Palavras-chave: } Blockchain, Registro Eletrônico de Ponto, GPS, QR-CODE

\end{resumo}

% \begin{abstract}
%
% Este trabalho de conclusão de curso propõe uma aplicação mobile para o Registro Eletrônico de Ponto Seguro baseado em Blockchain e em tecnologias como GPS e o QR-CODE. O objetivo da ferramenta é permitir uma maior segurança tanto por parte do empregador quanto por parte do trabalhador, dado que mesmo com a portaria 1510 do MTE, que especifica o funcionamento dos relogios de ponto, ainda existem muitas fraudes e desconfiança quando a segurança, tanto por parte dos empregados, quanto por parte dos empregadores. Esperamos que este trabalho ofereça uma contribuição pontual para a discução do uso de blockchain pelo poder publico.
%
% \textbf{Keywords: } Blockchain, Registro Eletrônico de Ponto, GPS, QR-CODE
%
% \end{abstract}

% Lista de figuras
\pdfbookmark[0]{\listfigurename}{lof}
\listoffigures*
\cleardoublepage %pula uma página
\pdfbookmark[0]{\listtablename}{lot}
\listoftables* % Lista de tabelas
\cleardoublepage
\printterms[columns=1,style=align] % lista de abreviaturas e siglas
\cleardoublepage % pula uma página
%\listadesimbolos
\tableofcontents








\chapter{Introdução}

Neste capitulo vamos apresentar um descrição dos objetivos deste trabalho explicitando suas partes e tecnologias envolvidas, o que um registro de ponto, desde de quanto ele vem sendo utilizado no Brasil, vamos apresentar as portarias que regulamentam seu uso.

\section{Registro de Ponto}

O registro de ponto foi criado em 20 de Novembro de 1888 por Willard Le Grand Bundy um joallheiro de Auburn, Nova Iorque ele criou em 1889 a International Time Recording. Abaixo a imagem de sua patente:

https://www.google.com/patents/US452894

Seu irmão entrou no negocio e começaram a fabricar relogios em grande escala, pela Bundy Manufacturing Company, notavelmente após alguns anos em 1911 eles mantinham a empresa Computing-Tabulating-Recording Company (CTR) o precursor da IBM.

Um relogio de ponto básico apenas carimba a data e o horario em cartões dos funcionarios. Mas haviam relogios que foram criados por essa empresa de Bundy que continham por exemplo uma chave para cada funcionario, "evitando fraudes". Hoje em dia existem relogios de ponto que utilizam biometria, e mesmo assim são burlados por meio de dedos de silicone por exemplo.

\section{Registro de Ponto no Brasil}

No Brasil o registro de ponto se dá de 3 formas:

\begin{itemize}
 \item [Livro de Ponto] Livro em que é assinado as entradas/saidas do trabalhador.
 \item [Mecânico] Básicamente os antigos relogios onde se bate o ponto por meio de um cartão de ponto.
 \item [Eletrônico] \begin{itemize} 
 										 \item biométrica
 										 \item cartão de ponto
 										 \item online (homologada pela Portaria 373)
                    \end{itemize}
\end{itemize}

\subsection{Regulamentação do Ministério Trabalho e Emprego}

O registro de ponto eletrônico no Brasil é regulamentado pela portaria do \gls{MTE} Nº 1.510, de 21 de Agosto de 2009 e entrou vigência plena em 2011, o registro de ponto é obrigatório, a partir de 10 funcionários, e não deve em hipose alguma ser alterado pelo empregador, existe um conjunto de empresas homologadas pelo \gls{MTE} que tem permissão para oferecer estes equipamentos, que seguem um conjunto de normas especificadas na portaria.

Além disso alguns tecnicos podem oferecer serviços de manutenção para o equipamento. Os equipamentos contam com relogio interno capaz de funcionar mesmo em situações de falta de energia, garante um horario com alta precisão bem como é protegido por meio de lacres e vários tipos de mecanismos contra adulteração, é realizada impressão interna em papel e existe uma memoria interna permanente, as estruturas de dados para armazenamento da informação são descritos nos anexos do documento.

O equipamento possui uma porta \gls{USB}, de auditoria, para que os fiscais do \gls{MTE} possam realizar processos de vistoria nos equipamentos a qualquer momento. Em casos de adulteração são tomadas as medidas civeis e criminais definidas na legislação. 

Mas mesmo com todos esses mecanismos de proteção ainda existe insegurança tanto por parte dos empregadores como dos empregados.

TODO: falar sobre o carimbo do tempo

\section{O Trabalho}

Este trabalho tem o intuito de permitir o registro de ponto pelo empregador e trabalhador por meio de um smartphone, a ideia é ter um app que obtenha coordenadas ou um qr-code, a hora certa do aparelho e de uma entidade que ofereça o serviço de carimbos do tempo e enviar para o backend do sistema.

O backend deve utilizar parte das estruturas de dados previstas na portaria 1.510 do MTE, que regulamenta o registro de ponto, com o intuito de estar de acordo com outros relogios de ponto reais. Essas estruturas de dados serão visiveis porem somente de leitura por parte das empresas, para isso vamos contar com um contrato inteligente que será usado como folha de ponto, cada vez que um funcionário entrar ou sair da empresa as estruturas de dados serão modificadas para refletir a entrada ou saida desse trabalhador.

Além disso outra ferramenta será um webapp com um dashboard mostrando como esta a frequencia de cada funcionario, voltado ao dono do contrato, neste caso o dono do estabelecimento. Os funcionários por sua vez podem ver sua frequencia e todo seu histórico de trabalho por meio do aplicativo no seu smartphone.

O foco principal dessa ferramenta é apoiar o trabalhador e o empregador em situações de falha de um equipamento de registro de ponto, bem como em situações de desentendimento entre ambos. No entanto foi publicada a portaria 373/2011, trazendo uma nova redação, com a possibilidade de registro eletrônico de ponto, por sistemas alternativos. Isso permite que o sistema aqui proposto seja oficialmente aceito em conciliação com o \gls{REP} descrito na postaria 1.510/2009.


\subsection{Blockchain}

A blockchain nasce com o lançamento do artigo de Satoshi Nakamoto, uma pessoa ficticia, que ate o momento não se descobriu a verdadeira identidade, que trata sobre uma criptomoeda hoje conhecida como bitcoin. A blockchain em si é uma cadeia de blocos, onde cada bloco esta vinculado ao outro por meio de uma cadeia de identificadores hash, que é um algoritmo que mapeia dados de comprimento variável para dados de comprimento fixo. 

Após o bitcoin outras criptomoedas surgiram e criaram suas proprias blockchains. Um caso especifico é o caso do ethereum, uma outra criptomoeda. Na blockchain do etherium é possivel, além dos blocos de transação, inserir smart contracts (contratos inteligêntes) que é um código que será executado se elementos do contrato forem contemplados. O próprio contrato inteligente poderia efetuar o calculo e o deposito na carteira do trabalhador de uma quantia de etherium equivalente ao seu salario, naquele mês, em horas trabalhadas.

\subsection{Geolocalização}

O Global Position System \gls{GPS}, é tecnologia extremamente difundida, hoje todos os smartphones possuem alguma tecnologia de geoposicionamento. O \gls{GPS} é apenas um dos sistemas de geoposionamento, existem outros, um exemplo é o sistema de navegação global por satélite Russo \gls{GLONASS}, outro seria o chines \gls{Beidou}.

Para geolocalizar uma dispositivo \gls{GPS} é necessário a triangulação com os satelites mais proximos. Básicamente é possivel obter informação de latitude, longitude e altimetria, existem dispositivos com alta precisão que usam uma quarta estação em terra.

No entanto o geoposicionamento por satelite nem sempre funciona, por isso foram criadas formas alternativas de geoposicionamento. Uma delas utiliza o \gls{WIFI} como referencia para obter informação de geoposicionamento. A proximidade ou a distancia pode ser medida pela força do sinal WIFI, e os dispositivos contam com MAC Adress (um endereço  único), e outros meios que permitem diferenciar os dispositivos, criando um mapeamento <id, position>.

% pensar em outras altertivas de localização


\subsection{QR-Code}

É um codigo de barras bidimencional que pode ser facilmente escaneado usando a maioria dos telefones celulares equipados com camera. No código QR é possivel armazenar informação como links e texto. Na versão 40 é possivel armazenar grande quantidade de texto, além disso mesmo danificado, dependendo do dano, todavia seria possivel obter a informação armazenada no QR-Code.

Em cada empresa que optar por nossa solução, podera ser inserido, um QR-Code na entrada, de forma que o trabalhador possa escanea-lo nos varios momento de checkin e checkout de jornada de trabalho. Automanticamente será feito o registro de ponto deste trabalhador.


\subsection{App para dispositivos moveis}

Os dispositivos moveis ultrapassaram o numero de computadores como aponta a agencia brasil da Empresa Brasileira de Comunicação \gls{EBC} sobre pesquisa do Intituto Brasileiro de Geografia e Estatistica \gls{IBGE}. Isso é um importante indicador de que o desenvolvimento de uma solução de registro de ponto na blockchain deve ser ao menos para o cliente (trabalhador) um app de smartphone dado que os dispositivos moveis hoje possuem a ubiqüidade satisfatória, dando conta de atender diversos tipos de trabalhadores.

O aplicativo deve permitir que o funcionário registre o ponto (entrada, (inicio e fim) do intervalo de lanche, saida). Atualização de informações do trabalhador. Avisar que seu expediente esta terminando. Registro de ponto automatico ao deixar local de trabalho para empregos presenciais, na sede do empregador. 

\subsection{App Web}

O empregador deve contar com uma app web para analisar os regitros de ponto de seus empregados, adicionar novos trabalhadores e atualizar as informações da empresa. Similar a aplicações como o PHP Timeclock.


\chapter{Registro Eletronico de Ponto}

%Escreva sobre os requisitos funcionais e nã funcionais sobre o registrado de ponto ( eletrônico ) e sobre os sistemas de registro de ponto ( SREP ). Use a Portaria 1510 e a 373 para isso. Também veja os mais diversos sites na Internet sobre produto, sistemas etc.... e suas consideracoes

%Veja exemplos de apps para registro de ponto


\section{Requisitos funcionais}

o sistema deverá ...


\subsection{Visão do trabalhador}

\begin{itemize}
	\item realizar o registro de ponto automatico de um trabalhador, quando for trabalho presencial em local especificado, ao deixar o local de trabalho
	\item realizar o registro de ponto por QR-Code
	\item realizar o registro de ponto por Voz
	\item realizar a atualização dos seus proprios dados
\end{itemize}

\subsection{Visão do empregador}


\begin{itemize}
	\item realizar o cadastro de trabalhadores;
	\item realizar o cadastro da empresa;
	\item realizar o detalhamento dos registros de ponto de todos os trabalhadores por dia, mes e ano;
	\item realizar o alerta de horas (para mais e para menos) de um trabalhador;
\end{itemize}

\section{Requisitos não funcionais}

\begin{itemize}
	\item O software deverá ser uma aplicação Mobile para o trabalhador;
	\item O software deverá ser uma aplicação Web para o empregador;
	\item O backend deve utilizar blockchain (contrato inteligente) para armazenar os dados de cada empresa, cada trabalhador e seus registros de ponto.
	\item O registro de ponto deve ser inalterado.
	\item Somente usuários autorizados deverão ter acessos as informações coletadas;
	\item Um trabalhador não tem acesso a informação de outro trabalhador;
	\item O tempo de resposta das funcionalidades do sistema não deverá ultrapassar 40 segundos;
	\item A usabilidade do sistema deve ser de fácil aprendizagem.
	\item Realizar registro de ponto (offline)
	\item Historico dos registros de ponto no smartphone (com acesso offline).
\end{itemize}

\section{Sistemas de registro de ponto ( \gls{SREP} )}

O Sistema de registro de ponto \gls{SREP} é disciplinado pelo artigo 1o da portaria 1.510/2009 do \gls{MTE}, o Artigo conta com um paragrafo unico que o define como "Sistema de Registro Eletrônico de Ponto - SREP - é o conjunto de equipamentos e programas informatizados destinado à anotação por meio eletrônico da entrada e saída dos trabalhadores das empresas, previsto no art. 74 da Consolidação das Leis do Trabalho - CLT, aprovada pelo Decreto-Lei no 5.452, de 1o de maio de 1943."

O artigo 2o define o que o SREP deve e não deve permitir. O SREP deve registrar fielmente as marcações efetuadas.

Não sendo permitida qualqueração que desvirtue os fins legais a que se destina, tais como:

\begin{itemize}
	\item [I] - restrições de horário à marcação do ponto;
  \item [II] - marcação automática do ponto, utilizando-se horários predeterminados ou o horário contratual;
  \item [III] - exigência, por parte do sistema, de autorização prévia para marcação de sobre jornada; e
  \item [IV] - existência de qualquer dispositivo que permita a alteração dos dados registrados peloempregado.

O Artigo 3o define o que é o Registrador Eletrônico de Ponto - REP como um "equipamento utilizado exclusivamente para o registro de jornada de trabalho e com capacidade para emitir documentos fiscais e realizar controles de natureza fiscal, referentes à entrada e à saída de empregados nos locais de trabalho." e define ainda o Parágrafo único "Para a utilização de Sistema de Registro Eletrônico de Ponto é obrigatório o uso do REP no local da prestação do serviço, vedados outros meios de registro", no entanto outra portaria permite o uso de meios de registro alternativo.


Nos Anexos podemos ver algumas estruturas de dados utilizadas para descrever o funcionamento teorico do \gls{REP}.

%TODO colocar os anexos

\chapter{Tecnologias Relacionadas}

% Escreva sobre assinatura digital, carimbo do tempo, blockchain ( e ferrramentas ), apps móveis

Neste capitulo vamos apresentar as principais tecnologias que são utilizadas neste trabalho. Como elas contribuem para construir uma solução de registro eletrônico de ponto seguro.

\section{Assinatura Digital}

...

\section{Blockchain}

test-RPC (O que é RPC)

NodeJS

\section{QR-Code}

\section{Carimbo do Tempo}

O carimbo do tempo é regulamentado pela ... e é utilizado para ...

\section{Apps Móveis}

Existem diversos frameworks que permitem desenvolver apps móveis para os sistemas operacionais mais conhecidos, neste priojeto vamos utilizar o Ionic um framework javascript que permite gerar apps mobile.

\chapter{App Universal par Registro de Ponto}

% Desenho ( um diagrama ) sobre seria um aplicativo universal para o registro de ponto

Neste capitulo apresentamos alguns wireframes que permitem entender o fluxo de navegação que propomos para este app.

\section{Tela Inicial}

\section{Leitor de QR-CODE}

\section{Configurações do Trabalhador}

\section{Compartilhamento de informações}

\chapter{Prova de Conceito e Análise}

% Vamos colocar o aplicativo no mercado e avaliar a sua utilizacao

\chapter{Consideracoes Finais}

% Escrever sobre o que foi feito e que no futuro irá integrar-se o registro de ponto seguro a um problema maior, que é a carteira de trabalho eletronica.


\bibliography{bibliography}

\apendices

\end{document}